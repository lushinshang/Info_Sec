<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>資通安全概論 - 互動式學習平台 ✨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Noto Sans CJK TC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #fff5f7 0%, #ffe5ec 50%, #f0e6ff 100%);
            color: #5c4a7e;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* ===== 側邊欄導航 ===== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 200px;
            height: 100vh;
            background: linear-gradient(180deg, #fce4ec 0%, #f0e6ff 100%);
            padding: 20px;
            overflow-y: auto;
            border-right: 3px solid #ffb3d9;
            box-shadow: 2px 0 8px rgba(255, 105, 180, 0.15);
        }

        .sidebar h2 {
            color: #d946a6;
            margin-bottom: 20px;
            font-size: 1.15em;
            font-weight: 700;
            text-align: center;
        }

        .unit-nav {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .unit-nav button {
            padding: 12px;
            background: linear-gradient(135deg, #ffb3d9 0%, #ff9ec7 100%);
            color: #fff;
            border: 2px solid #ff99cc;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.95em;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.2);
        }

        .unit-nav button:hover {
            background: linear-gradient(135deg, #ff99cc 0%, #ff85b8 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
        }

        .unit-nav button.active {
            background: linear-gradient(135deg, #ff6ba6 0%, #ff5299 100%);
            border-color: #ff3385;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.4);
        }

        /* ===== 主容器 ===== */
        .main {
            margin-left: 200px;
            padding: 25px;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #ffb3d9 0%, #b3d9ff 50%, #b3ffb3 100%);
            padding: 35px;
            border-radius: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.2);
            text-align: center;
            border: 2px solid #ff99cc;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            color: #fff;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.05em;
            color: #fff;
            font-weight: 500;
        }

        /* ===== 分頁容器 ===== */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== Tab 導航 ===== */
        .tab-navigation {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 0;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 12px 28px;
            background: linear-gradient(135deg, #b3d9ff 0%, #d9b3ff 100%);
            color: #5c4a7e;
            border: 2px solid #99ccff;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.95em;
            box-shadow: 0 2px 8px rgba(179, 217, 255, 0.2);
        }

        .tab-btn:hover {
            background: linear-gradient(135deg, #99ccff 0%, #cc99ff 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(179, 217, 255, 0.3);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #ff9ec7 0%, #ffb3d9 100%);
            color: #fff;
            border-color: #ff85b8;
            box-shadow: 0 4px 12px rgba(255, 159, 199, 0.3);
        }

        /* ===== 內容區 ===== */
        .tab-content {
            display: none;
            background: linear-gradient(135deg, #fff9fc 0%, #f5e6ff 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 16px rgba(255, 105, 180, 0.1);
            border: 2px solid #ffcceb;
        }

        .tab-content.active {
            display: block;
        }

        /* ===== 心智圖容器 ===== */
        .mindmap-container {
            min-height: 650px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: auto;
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #ffcceb;
        }

        .mindmap-image {
            max-width: 100%;
            max-height: 700px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.15);
        }

        /* ===== 閃卡容器 ===== */
        .flashcard-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            padding: 20px;
        }

        .flashcard {
            width: 100%;
            max-width: 600px;
            height: 320px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            font-size: 1.15em;
            font-weight: 600;
            box-shadow: 0 6px 16px rgba(255, 105, 180, 0.2);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #b3d9ff 0%, #d9b3ff 100%);
            color: #fff;
            border: 2px solid #99ccff;
        }

        .flashcard-back {
            background: linear-gradient(135deg, #ffb3d9 0%, #b3ffb3 100%);
            color: #fff;
            transform: rotateY(180deg);
            border: 2px solid #ff99cc;
        }

        .flashcard-nav {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .flashcard-nav button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ffb3d9 0%, #ff9ec7 100%);
            color: #fff;
            border: 2px solid #ff99cc;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.2);
        }

        .flashcard-nav button:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff99cc 0%, #ff85b8 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
        }

        .flashcard-nav button:disabled {
            background: #ddd;
            color: #999;
            cursor: not-allowed;
            border-color: #ccc;
        }

        /* ===== 測驗容器 ===== */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-progress {
            text-align: center;
            color: #8b6b9e;
            margin-bottom: 25px;
            font-weight: 600;
            font-size: 1.05em;
        }

        .quiz-question {
            background: linear-gradient(135deg, #fff9fc 0%, #f5e6ff 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #ffb3d9;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.1);
        }

        .quiz-question h3 {
            margin-bottom: 15px;
            color: #d946a6;
            font-size: 1.1em;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            padding: 15px;
            background: linear-gradient(135deg, #b3d9ff 0%, #d9b3ff 100%);
            color: #fff;
            border: 2px solid #99ccff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(179, 217, 255, 0.2);
        }

        .quiz-option:hover {
            background: linear-gradient(135deg, #99ccff 0%, #cc99ff 100%);
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(179, 217, 255, 0.3);
        }

        .quiz-option.selected {
            background: linear-gradient(135deg, #ffb3d9 0%, #ff9ec7 100%);
            border-color: #ff85b8;
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #b3ffb3 0%, #99ff99 100%);
            border-color: #85ff85;
        }

        .quiz-option.incorrect {
            background: linear-gradient(135deg, #ffb3b3 0%, #ff9999 100%);
            border-color: #ff8585;
        }

        .quiz-explanation {
            background: linear-gradient(135deg, #fff9fc 0%, #f5e6ff 100%);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            color: #5c4a7e;
            border-left: 4px solid #d9b3ff;
            display: none;
        }

        .quiz-explanation.show {
            display: block;
        }

        .quiz-score {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, #ffb3d9 0%, #b3d9ff 100%);
            border-radius: 15px;
            margin: 25px 0;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
            border: 2px solid #ff99cc;
        }

        .quiz-score.show {
            display: block;
        }

        .quiz-score h2 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .quiz-score p {
            color: #fff;
            font-weight: 600;
            font-size: 1.1em;
        }

        /* ===== 響應式設計 ===== */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 3px solid #ffb3d9;
                padding: 15px;
            }

            .main {
                margin-left: 0;
                padding: 15px;
            }

            .header {
                padding: 20px;
                margin-bottom: 15px;
            }

            .header h1 {
                font-size: 1.6em;
            }

            .unit-nav {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .unit-nav button {
                flex: 1;
                min-width: 80px;
            }

            .tab-navigation {
                flex-wrap: wrap;
            }

            .mindmap-image {
                max-height: 500px;
            }

            .flashcard {
                height: 250px;
            }
        }

        /* ===== 滾動條美化 ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f5e6ff;
        }

        ::-webkit-scrollbar-thumb {
            background: #ffb3d9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff99cc;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>📚 單元導航</h2>
        <div class="unit-nav" id="unitNav"></div>
    </div>

    <div class="main">
        <div class="header">
            <h1>🧠 資通安全概論</h1>
            <p id="pageSubtitle">資通系統組成與防護目標</p>
        </div>
        <div id="pagesContainer"></div>
    </div>

    <script>
        // 心智圖 PNG 檔案映射
        const mindmapImages = {
            1: '第一章-資通系統組成與防護目標.png',
            2: '第二章-資通安全基本觀念與相關法規.png',
            3: '第三章-資通安全風險管理.png',
            4: '第四章-資通安全管理面與認知訓練.png',
            5: '第五章-資通系統防護控制措施.png',
            6: '第六章-資通安全技術應辦事項.png'
        };

        // 應用程式資料 - 10張閃卡 + 30題測驗
        const appData = {
            1: {
                title: "Unit-1: 資通系統組成與防護目標",
                subtitle: "資通系統組成與防護目標",
                flashcards: [
                    { q: "資通系統的定義是什麼?", a: "用以蒐集、控制、傳輸、儲存、流通、刪除資訊或對資訊為其他處理、使用或分享之系統"},
                    { q: "資通服務的定義是什麼?", a: "與資訊之蒐集、控制、傳輸、儲存、流通、刪除、其他處理、使用或分享相關之服務"},
                    { q: "資通系統的五個關鍵要素是什麼?", a: "軟體、資訊/資料、硬體、人員、網路"},
                    { q: "CNS 27002中資產分為哪兩大類?", a: "主要資產(資訊及營運過程)、支援資產(硬體、軟體、網路、人員、場域、組織結構)"},
                    { q: "CIA三目標是什麼?", a: "機密性(Confidentiality)、完整性(Integrity)、可用性(Availability)"},
                    { q: "機密性的定義是什麼?", a: "確保資訊不被未經授權的人員或系統存取,防止非授權人員存取資訊,確保資訊的秘密性與隱私"},
                    { q: "完整性的定義是什麼?", a: "確保資訊在生命週期中持續正確、具一致性且可被信任,防止未經授權的修改或破壞"},
                    { q: "可用性的定義是什麼?", a: "確保資訊與資源在需要時,可被授權使用者存取與使用,且系統功能正常運作"},
                    { q: "法律遵循性的定義是什麼?", a: "確保所欲保護的資訊內容與所有資安活動,皆遵循相關的法規要求"},
                    { q: "存取控制的保護方式有哪些?", a: "身分驗證與授權機制、資料加解密、資料遮罩、去識別化"}
                ],
                quizzes: [
                    { q: "以下哪個不是資通系統的關鍵要素?", opts: ["軟體", "資訊", "預算", "人員"], ans: 2, exp: "資通系統的五個關鍵要素包括軟體、資訊/資料、硬體、人員、網路,不包括預算"},
                    { q: "以下哪個不屬於主要資產?", opts: ["資訊", "營運過程", "硬體", "活動"], ans: 2, exp: "主要資產包括資訊及營運過程與活動,硬體屬於支援資產"},
                    { q: "以下哪個不是CIA三目標之一?", opts: ["機密性", "完整性", "可靠性", "可用性"], ans: 2, exp: "CIA三目標為機密性、完整性、可用性,可靠性不是其中之一"},
                    { q: "以下哪個不是保護機密性的方法?", opts: ["資料加密", "存取控制", "系統備份", "資料遮罩"], ans: 2, exp: "系統備份主要用於保護可用性,不是機密性的保護方法"},
                    { q: "以下哪個不是保護完整性的方法?", opts: ["數位簽章", "雜湊函數", "負載平衡", "資料驗證"], ans: 2, exp: "負載平衡主要用於保護可用性,不是完整性的保護方法"},
                    { q: "以下哪個不是保護可用性的方法?", opts: ["系統備份", "負載平衡", "資料加密", "系統備援"], ans: 2, exp: "資料加密主要用於保護機密性,不是可用性的保護方法"},
                    { q: "以下哪個不屬於支援資產?", opts: ["硬體", "軟體", "資訊", "人員"], ans: 2, exp: "資訊屬於主要資產,不是支援資產"},
                    { q: "以下哪個不是資通安全管理法規定的防護目標?", opts: ["機密性", "完整性", "效率性", "可用性"], ans: 2, exp: "資通安全管理法規定的防護目標為機密性、完整性及可用性,不包括效率性"},
                    { q: "資通系統是指什麼?", opts: ["只包含硬體設備", "只包含軟體程式", "用以處理資訊的系統", "只包含網路設備"], ans: 2, exp: "資通系統是用以蒐集、控制、傳輸、儲存、流通、刪除資訊或對資訊為其他處理、使用或分享之系統"},
                    { q: "資通服務主要涉及什麼?", opts: ["只有系統維護", "只有網路服務", "與資訊處理相關的服務", "只有軟體開發"], ans: 2, exp: "資通服務係指與資訊之蒐集、控制、傳輸、儲存、流通、刪除、其他處理、使用或分享相關之服務"},
                    { q: "CNS 27002中主要資產包括什麼?", opts: ["只有硬體", "只有軟體", "資訊及營運過程", "只有人員"], ans: 2, exp: "主要資產包括資訊(包含資料)及營運過程與活動"},
                    { q: "CNS 27002中支援資產包括什麼?", opts: ["只有資訊", "硬體、軟體、網路、人員、場域等", "只有營運過程", "只有組織結構"], ans: 1, exp: "支援資產包括硬體、軟體、網路、人員、場域及組織結構"},
                    { q: "機密性主要保護什麼?", opts: ["系統效能", "資訊不被未經授權存取", "系統可用性", "資訊處理速度"], ans: 1, exp: "機密性確保資訊不被未經授權的人員或系統存取"},
                    { q: "完整性主要保護什麼?", opts: ["系統速度", "資訊正確性與一致性", "網路頻寬", "儲存空間"], ans: 1, exp: "完整性確保資訊在生命週期中持續正確、具一致性且可被信任"},
                    { q: "可用性主要保護什麼?", opts: ["資訊機密性", "系統與資訊可被授權使用者存取", "資料加密", "網路速度"], ans: 1, exp: "可用性確保資訊與資源在需要時,可被授權使用者存取與使用"},
                    { q: "資料加解密主要用於保護什麼?", opts: ["完整性", "機密性", "可用性", "效率性"], ans: 1, exp: "資料加解密將資料轉換為密文,主要用於保護機密性"},
                    { q: "數位簽章主要用於保護什麼?", opts: ["可用性", "完整性", "機密性", "效率性"], ans: 1, exp: "數位簽章透過密碼學技術驗證資料的來源與完整性"},
                    { q: "系統備份主要用於保護什麼?", opts: ["機密性", "完整性", "可用性", "效率性"], ans: 2, exp: "系統備份是確保在資料損壞或遺失時能夠復原,主要保護可用性"},
                    { q: "資通安全最常被忽略但至關重要的環節是什麼?", opts: ["硬體", "軟體", "人員", "網路"], ans: 2, exp: "人員是資通安全中最常被忽略但卻至關重要的環節,許多資安事件往往源於人為疏失或社交工程攻擊"},
                    { q: "IoT裝置在資安方面的主要問題是什麼?", opts: ["價格太高", "功能太少", "設計時未充分考慮資安", "無法聯網"], ans: 2, exp: "許多IoT裝置在設計之初並未充分考慮資安問題,使其成為駭客入侵的新入口"},
                    { q: "資通安全與國家安全的關係是什麼?", opts: ["沒有關係", "資安不重要", "保護數位環境就是保護國家主權", "只影響企業"], ans: 2, exp: "在網路戰與資訊戰日益頻繁的當代,資安問題有時已上升到國家安全的層次"},
                    { q: "現代公民應具備的基本素養包括什麼?", opts: ["只要會用電腦", "不需要資安知識", "具備一定的資安知識及警覺性", "只有專業人員需要"], ans: 2, exp: "在全面數位化的時代,具備一定的資安知識及警覺性,就像識字一樣重要"},
                    { q: "法律遵循性對組織的重要性是什麼?", opts: ["不重要", "只是形式", "是合法運作及取得公眾信任的基礎", "只有政府需要"], ans: 2, exp: "在數位政府及數位經濟的背景下,法律遵循性是組織合法運作及取得公眾信任的基礎"},
                    { q: "資通安全管理法的主要目的是什麼?", opts: ["增加成本", "保障國家安全,維護社會公共利益", "限制網路使用", "管制企業"], ans: 1, exp: "資通安全管理法的主要目的在於積極推動國家資通安全政策,加速建構國家資通安全環境,以保障國家安全,維護社會公共利益"},
                    { q: "資訊安全控制措施參考指引CNS 27002是什麼標準?", opts: ["美國標準", "國際標準ISO/IEC 27002的國內對應標準", "中國標準", "日本標準"], ans: 1, exp: "CNS 27002:2023的內容與國際標準ISO/IEC 27002相對應"},
                    { q: "去識別化主要用於保護什麼?", opts: ["系統效能", "個人隱私與機密性", "網路速度", "儲存空間"], ans: 1, exp: "去識別化將資料中可以直接或間接識別個人的資訊移除、修改或替換掉,主要用於保護個人隱私與機密性"},
                    { q: "容量規劃主要用於保護什麼?", opts: ["機密性", "完整性", "可用性", "效率性"], ans: 2, exp: "容量規劃預先規劃足夠的系統資源,以應對高峰期或突發流量,避免因資源不足導致服務降級或中斷,主要保護可用性"},
                    { q: "雜湊函數主要用於什麼?", opts: ["資料加密", "驗證資料完整性", "系統備份", "網路傳輸"], ans: 1, exp: "雜湊函數透過計算資料的數位指紋,主要用於驗證資料是否被竄改,保護完整性"},
                    { q: "存取控制可以同時保護哪些目標?", opts: ["只有機密性", "只有完整性", "機密性、完整性及可用性", "只有可用性"], ans: 2, exp: "存取控制同時出現在機密性、完整性及可用性三個目標的周圍,表示其對保護三者都很重要"}
                ]
            },
            2: {
                title: "Unit-2: 資通安全基本觀念與相關法規",
                subtitle: "資通安全基本觀念與相關法規",
                flashcards: [
                    { q: "我國資通安全管理體系最頂層的決策單位是什麼?", a: "行政院國家資通安全會報,由行政院副院長擔任召集人"},
                    { q: "資通安全管理法的主管機關是誰?", a: "數位發展部"},
                    { q: "資通安全管理法於何時公布及施行?", a: "107年6月6日公布,108年1月1日施行,114年9月24日修正"},
                    { q: "公務機關必須設置什麼資安職位?", a: "資通安全長,由副首長或適當人員兼任"},
                    { q: "資通安全責任等級分為哪幾級?", a: "A級、B級、C級、D級、E級"},
                    { q: "資通安全管理法適用對象不包括哪些機關?", a: "不包含軍事機關及情報機關"},
                    { q: "特定非公務機關包括哪些?", a: "關鍵基礎設施提供者、公營事業、特定財團法人、受政府控制之事業團體或機構"},
                    { q: "資通安全事件分為幾級?", a: "四級,第三級或第四級為重大資通安全事件"},
                    { q: "資通安全維護計畫應包含哪些重點?", a: "核心業務、資安政策、組織、人力經費、系統盤點、風險評估、防護措施、事件通報應變演練等13項"},
                    { q: "第七期國家資通安全發展方案的期程是?", a: "114年至117年"}
                ],
                quizzes: [
                    { q: "以下哪個不是行政院國家資通安全會報的成員?", opts: ["行政院副院長", "部會首長", "國外專家", "直轄市政府副市長"], ans: 2, exp: "會報成員包括行政院副院長、部會首長、直轄市政府副市長、國安局副局長、學者及專家,不包括國外專家"},
                    { q: "以下哪個不是網際防護體系的下轄組別?", opts: ["關鍵資訊基礎設施安全管理組", "產業發展組", "防治網路犯罪組", "法規及標準推動組"], ans: 2, exp: "防治網路犯罪組屬於網路犯罪偵防體系,不是網際防護體系的組別"},
                    { q: "以下哪個不是資通安全責任等級?", opts: ["A級", "B級", "F級", "C級"], ans: 2, exp: "資通安全責任等級分為A級、B級、C級、D級、E級,沒有F級"},
                    { q: "以下哪個不是特定非公務機關?", opts: ["關鍵基礎設施提供者", "公營事業", "私人診所", "特定財團法人"], ans: 2, exp: "特定非公務機關包括關鍵基礎設施提供者、公營事業、特定財團法人、受政府控制之事業團體或機構,不包括一般私人診所"},
                    { q: "以下哪個不是資通安全管理法修正新增內容?", opts: ["危害國家資通安全產品定義", "適任性查核", "增加預算", "資安專職人員設置"], ans: 2, exp: "修正內容包括危害國家資安產品定義、適任性查核、資安專職人員設置等,不包括增加預算"},
                    { q: "以下哪個不是公務機關的資安義務?", opts: ["訂定資通安全維護計畫", "設置資通安全長", "購買防毒軟體", "訂定通報及應變機制"], ans: 2, exp: "公務機關的資安義務包括訂定維護計畫、設置資安長、訂定通報應變機制等,購買防毒軟體不是法定義務"},
                    { q: "以下哪個不是資通安全維護計畫應包含的項目?", opts: ["核心業務", "資安政策", "員工薪資", "風險評估"], ans: 2, exp: "維護計畫應包含核心業務、資安政策、組織、人力經費、系統盤點、風險評估等,員工薪資不是必須項目"},
                    { q: "以下哪個不是第七期國家資通安全發展方案的推動策略?", opts: ["全社會資安防禦", "提升關鍵基礎設施資安韌性", "減少資安預算", "AI新興資安科技應用"], ans: 2, exp: "推動策略包括全社會資安防禦、提升關鍵基礎設施資安韌性、壯大資安產業、AI新興科技應用,不包括減少預算"},
                    { q: "資通安全管理法的主管機關是誰?", opts: ["行政院", "數位發展部", "國防部", "內政部"], ans: 1, exp: "資通安全管理法第2條規定,主管機關為數位發展部"},
                    { q: "行政院國家資通安全會報的召集人是誰?", opts: ["行政院院長", "行政院副院長", "數位發展部部長", "國安局局長"], ans: 1, exp: "國家資通安全會報由行政院副院長擔任召集人"},
                    { q: "網際防護體系的主責單位是?", opts: ["內政部", "法務部", "數位發展部", "國防部"], ans: 2, exp: "網際防護體系由數位發展部主責"},
                    { q: "網路犯罪偵防體系的主責單位是?", opts: ["數位發展部", "內政部/法務部", "國防部", "外交部"], ans: 1, exp: "網路犯罪偵防體系由內政部及法務部共同主責"},
                    { q: "資通安全管理法於何時公布?", opts: ["106年6月6日", "107年6月6日", "108年1月1日", "114年9月24日"], ans: 1, exp: "資通安全管理法於107年6月6日公布"},
                    { q: "資通安全管理法於何時施行?", opts: ["107年6月6日", "108年1月1日", "109年1月1日", "110年1月1日"], ans: 1, exp: "資通安全管理法於108年1月1日施行"},
                    { q: "公務機關應設置什麼職位負責資安?", opts: ["資訊長", "資通安全長", "技術長", "管理長"], ans: 1, exp: "資通安全管理法第12條規定,公務機關應置資通安全長"},
                    { q: "重大資通安全事件是指第幾級事件?", opts: ["第一級", "第二級", "第三級或第四級", "第五級"], ans: 2, exp: "資通安全管理法施行細則第10條規定,重大資通安全事件為第三級或第四級事件"},
                    { q: "資通安全維護計畫應保留日誌至少多久?", opts: ["三個月", "六個月", "九個月", "一年"], ans: 1, exp: "資通安全管理法施行細則第6條規定,應保留日誌至少六個月"},
                    { q: "核心資通系統的定義是什麼?", opts: ["所有系統", "支援核心業務必要的系統或防護需求等級為高者", "只有高等級系統", "只有對外服務系統"], ans: 1, exp: "施行細則第7條規定,核心資通系統係指支援核心業務必要的系統或防護需求等級為高者"},
                    { q: "第七期國家資通安全發展方案的願景是什麼?", opts: ["建構安全的網路", "建構韌性安全的數位社會", "提升資安能力", "保護國家安全"], ans: 1, exp: "第七期國家資通安全發展方案的願景是建構韌性安全的數位社會"},
                    { q: "資通安全事件調查報告應包含什麼?", opts: ["只有發生時間", "只有影響範圍", "影響範圍、損害評估、復原歷程、根因分析及防範措施", "只有處理人員"], ans: 2, exp: "施行細則第8條規定,應包含影響範圍、損害評估、復原歷程、根因分析及防範措施"},
                    { q: "委外資通業務涉及國家機密者需進行什麼?", opts: ["背景調查", "適任性查核", "財產申報", "體格檢查"], ans: 1, exp: "施行細則第4條規定,涉及國家機密者需進行適任性查核"},
                    { q: "資通安全管理法適用對象不包括什麼?", opts: ["公務機關", "軍事機關", "特定非公務機關", "關鍵基礎設施"], ans: 1, exp: "資通安全管理法不包含軍事機關及情報機關"},
                    { q: "關鍵基礎設施提供者由誰指定?", opts: ["主管機關", "中央目的事業主管機關報請行政院核定", "立法院", "監察院"], ans: 1, exp: "資通安全管理法第20條規定,由中央目的事業主管機關指定,報請行政院核定"},
                    { q: "危害國家資通安全產品由誰認定?", opts: ["立法院", "主管機關", "行政院", "各機關自行認定"], ans: 1, exp: "資通安全管理法第3條規定,由主管機關認定"},
                    { q: "公務機關禁止使用危害國家資安產品,例外使用須經誰核定?", opts: ["資安長核可並報主管機關核定", "部長核可", "院長核可", "立法院核可"], ans: 0, exp: "資通安全管理法第11條規定,例外使用須經資安長核可並報主管機關核定"},
                    { q: "特定非公務機關應設置什麼職位?", opts: ["資訊長", "資通安全長", "技術長", "不需設置"], ans: 1, exp: "資通安全管理法第23條規定,特定非公務機關應設置資通安全長"},
                    { q: "特定非公務機關未通報資安事件的罰鍰上限是多少?", opts: ["一百萬", "五百萬", "一千萬", "二千萬"], ans: 2, exp: "資通安全管理法第29條規定,處罰鍰新臺幣三十萬至一千萬元"},
                    { q: "主管機關應定期公布什麼報告?", opts: ["只有情勢報告", "只有稽核報告", "情勢報告、稽核概況報告及發展方案", "只有發展方案"], ans: 2, exp: "資通安全管理法第6條規定,應公布情勢報告、稽核概況報告及發展方案"},
                    { q: "資通安全情資分享機制由誰訂定?", opts: ["行政院", "立法院", "主管機關", "各機關自訂"], ans: 2, exp: "資通安全管理法第9條規定,由主管機關訂定情資分析、整合與分享等辦法"},
                    { q: "資通安全事件涉及個人資料外洩時應如何處理?", opts: ["只需內部處理", "只需通報主管機關", "應另依個人資料保護法及其相關法令規定辦理", "不需處理"], ans: 2, exp: "資通安全管理法第33條規定,應另依個人資料保護法及其相關法令規定辦理"}
                ]
            },
            3: {
                title: "Unit-3: 資通安全風險管理",
                subtitle: "資通安全風險管理",
                flashcards: [
                    { q: "風險的定義是什麼?", a: "威脅利用其相對應的脆弱性,造成組織或政府機關的資訊資產受到衝擊的可能性"},
                    { q: "風險由哪三個要素產生?", a: "威脅(Threat)、脆弱性(Vulnerability)、衝擊(Impact)"},
                    { q: "資通安全風險管理流程的核心步驟是什麼?", a: "風險評鑑(全景建立、風險辨識、風險分析、風險評估)、風險處理、風險接受、風險監視與審查"},
                    { q: "高階風險評鑑的主要依據是什麼?", a: "依據資通安全責任等級分級辦法之資通系統防護需求分級原則"},
                    { q: "詳細風險評鑑的三個階段是什麼?", a: "風險識別、風險分析、風險評估"},
                    { q: "風險處理的四種策略是什麼?", a: "風險修改、風險留存、風險避免、風險分擔"},
                    { q: "風險修改的主要方法是什麼?", a: "透過調整安全控制措施,降低風險發生的可能性或其造成的衝擊"},
                    { q: "NIST CSF 2.0的六大核心功能是什麼?", a: "治理(Govern)、識別(Identify)、保護(Protect)、偵測(Detect)、回應(Respond)、復原(Recover)"},
                    { q: "CNS 27005的主要目的是什麼?", a: "提供組織如何管理資訊安全風險的指引"},
                    { q: "衝擊嚴重性通常分為哪三個等級?", a: "普(輕微)、中(嚴重)、高(非常嚴重或災難性)"}
                ],
                quizzes: [
                    { q: "以下哪個不是風險產生的要素?", opts: ["威脅", "脆弱性", "預算", "衝擊"], ans: 2, exp: "風險的產生源於威脅、脆弱性、衝擊三個要素,不包括預算"},
                    { q: "以下哪個不是風險處理策略?", opts: ["風險修改", "風險留存", "風險忽略", "風險避免"], ans: 2, exp: "風險處理策略包括風險修改、風險留存、風險避免、風險分擔,不包括風險忽略"},
                    { q: "以下哪個不是NIST CSF 2.0的核心功能?", opts: ["識別", "保護", "預防", "偵測"], ans: 2, exp: "NIST CSF 2.0的核心功能包括治理、識別、保護、偵測、回應、復原,不包括預防"},
                    { q: "以下哪個不是衝擊嚴重性的等級?", opts: ["普級", "中級", "超級", "高級"], ans: 2, exp: "衝擊嚴重性分為普(輕微)、中(嚴重)、高(非常嚴重或災難性)三個等級,沒有超級"},
                    { q: "以下哪個不是風險評鑑的階段?", opts: ["風險辨識", "風險分析", "風險消除", "風險評估"], ans: 2, exp: "風險評鑑包括風險辨識、風險分析、風險評估,不包括風險消除"},
                    { q: "以下哪個不是風險管理流程的環節?", opts: ["風險評鑑", "風險處理", "風險投資", "風險接受"], ans: 2, exp: "風險管理流程包括風險評鑑、風險處理、風險接受、風險監視與審查,不包括風險投資"},
                    { q: "以下哪個不是風險修改的控制措施類型?", opts: ["預防", "偵測", "營利", "復原"], ans: 2, exp: "風險修改的控制措施包括消弭、矯正、預防、制止、衝擊最小化、偵測、監視、復原、認知,不包括營利"},
                    { q: "以下哪個不是詳細風險評鑑的階段?", opts: ["風險識別", "風險分析", "風險評估", "風險執行"], ans: 3, exp: "詳細風險評鑑的三個階段是風險識別、風險分析、風險評估,不包括風險執行"},
                    { q: "風險的定義是什麼?", opts: ["只有威脅", "只有脆弱性", "威脅利用脆弱性造成衝擊的可能性", "只有衝擊"], ans: 2, exp: "風險是威脅利用其相對應的脆弱性,造成組織的資訊資產受到衝擊的可能性"},
                    { q: "威脅是什麼?", opts: ["系統漏洞", "可能對資產造成損害的潛在原因或事件", "已發生的攻擊", "防護措施"], ans: 1, exp: "威脅是指可能對組織資產造成損害的潛在原因或事件"},
                    { q: "脆弱性是什麼?", opts: ["攻擊手法", "資訊資產本身或其保護機制中存在的弱點", "防護措施", "風險等級"], ans: 1, exp: "脆弱性是指資訊資產本身或其保護機制中存在的弱點,可能被威脅利用"},
                    { q: "衝擊是什麼?", opts: ["攻擊次數", "威脅利用脆弱性成功造成資安事件時對組織資產的負面影響", "系統效能", "網路速度"], ans: 1, exp: "衝擊是指當威脅利用脆弱性成功造成資安事件時,對組織資產所造成的負面影響"},
                    { q: "風險管理全景建立的目的是什麼?", opts: ["減少成本", "對組織內外部的環境有全面的了解", "增加人力", "提升效率"], ans: 1, exp: "建立全景的目的是對組織內外部的環境有全面的了解,並明確資安管理的目標與準則"},
                    { q: "高階風險評鑑的主要優點是什麼?", opts: ["最精確", "簡便易行,能快速獲得風險概觀", "成本最高", "時間最長"], ans: 1, exp: "高階風險評鑑的優點是簡便易行,容易獲得風險評鑑參與人員的接受,能夠快速找出最關鍵的風險點"},
                    { q: "詳細風險評鑑的特點是什麼?", opts: ["最簡單", "最快速", "更深入、更精確,需要投入較多時間及資源", "不需專家"], ans: 2, exp: "詳細風險評鑑更深入且精確,會對資產進行深度識別與鑑別,但需要投入較多的時間及資源"},
                    { q: "風險修改的目的是什麼?", opts: ["增加風險", "藉由施行、移除或改變安全控制措施降低風險", "忽略風險", "延後處理"], ans: 1, exp: "風險修改的目的是藉由施行、移除或改變安全控制措施,修訂或降低風險等級"},
                    { q: "風險留存適用於什麼情況?", opts: ["所有風險", "處理成本過高或沒有其他可行方案時", "高風險", "緊急情況"], ans: 1, exp: "風險留存是在處理成本過高或沒有其他可行方案時採用,但需要持續監控及緊急準備"},
                    { q: "風險避免的主要方法是什麼?", opts: ["減少風險", "透過終止或避免活動徹底消除風險", "轉移風險", "接受風險"], ans: 1, exp: "風險避免是指組織直接放棄或避免可能造成特定風險增加的活動或情況,從根本上消除風險"},
                    { q: "風險分擔的常見方式有哪些?", opts: ["只有保險", "保險及契約中增訂違約金條款", "只有契約", "都不可行"], ans: 1, exp: "風險分擔的常見方式包括購買保險及在契約中增訂懲罰性違約金條款"},
                    { q: "NIST CSF 2.0新增的核心功能是什麼?", opts: ["識別", "保護", "治理", "偵測"], ans: 2, exp: "NIST CSF 2.0在原有五個功能基礎上,新增了第六個核心功能:治理(Govern)"},
                    { q: "NIST CSF 2.0的治理功能包括什麼?", opts: ["技術防護", "建立並溝通資通安全策略、角色、責任及監督", "系統開發", "網路架構"], ans: 1, exp: "治理功能強調建立並溝通資通安全策略、角色、責任及監督"},
                    { q: "CNS 27005主要提供什麼指引?", opts: ["系統開發", "資訊安全風險管理", "網路架構", "軟體測試"], ans: 1, exp: "CNS 27005提供組織如何管理資訊安全風險的指引"},
                    { q: "風險評鑑組織應包括哪些成員?", opts: ["只有資訊部門", "只有資安人員", "跨部門成員包括業務、資訊、總務、人事等", "只有主管"], ans: 2, exp: "風險評鑑組織應包含跨部門成員,如業務承辦人員、資訊部門、總務部門、人事部門、會計部門等"},
                    { q: "機密性的衝擊評估主要考量什麼?", opts: ["系統效能", "資料外洩造成的影響", "網路速度", "儲存空間"], ans: 1, exp: "機密性構面主要考量當資通系統發生資安事件導致資料外洩或遭竄改,造成資料機密性受損時的衝擊程度"},
                    { q: "完整性的衝擊評估主要考量什麼?", opts: ["系統速度", "資訊錯誤或遭竄改的影響", "網路頻寬", "使用人數"], ans: 1, exp: "完整性構面主要考量當資通系統發生資安事件造成資訊錯誤或遭竄改等情事的衝擊程度"},
                    { q: "可用性的衝擊評估主要考量什麼?", opts: ["資料機密", "系統中斷造成的影響", "資料完整", "網路安全"], ans: 1, exp: "可用性構面主要考量當資通系統中斷服務,造成可用性受損時的衝擊程度"},
                    { q: "法律遵循性的衝擊評估主要考量什麼?", opts: ["技術能力", "違反相關法令可能導致的法律責任", "預算多寡", "人員數量"], ans: 1, exp: "法律遵循性構面主要考量當資通系統運作違反相關法令或規範時,可能導致的法律責任程度"},
                    { q: "風險接受準則會受哪些因素影響?", opts: ["只有預算", "只有技術", "業務需求、法律要求、資源分配、技術成熟度等", "只有人力"], ans: 2, exp: "風險接受準則會受業務需求與目標、法律法令要求、資源分配狀況、經費預算、技術成熟度、社會與人道因素等影響"},
                    { q: "殘餘風險是什麼?", opts: ["最初的風險", "處理後剩餘的風險", "新發生的風險", "已消除的風險"], ans: 1, exp: "殘餘風險是指經過風險處理後,仍然存在的風險"},
                    { q: "NIST CSF 2.0強調什麼導向?", opts: ["過程導向", "成果導向", "成本導向", "技術導向"], ans: 1, exp: "NIST CSF 2.0更注重資通安全活動所帶來的實際成果及成效,而不僅僅是實施了哪些控制措施"}
                ]
            },
            4: {
                title: "Unit-4: 資通安全管理面與認知訓練",
                subtitle: "資通安全管理面與認知訓練",
                flashcards: [
                    { q: "A級、B級、C級機關在資通系統分級完成時限有何不同?", a: "A級及B級機關須於1年內完成分級及控制措施,C級機關須於1年內完成分級、2年內完成控制措施"},
                    { q: "資通系統防護需求分級的四個構面是什麼?", a: "機密性(C)、完整性(I)、可用性(A)、法律遵循性(L)"},
                    { q: "資通系統防護基準包含哪七大構面?", a: "存取控制、事件日誌與可歸責性、營運持續計畫、識別與鑑別、系統與服務獲得、系統與通訊保護、系統與資訊完整性"},
                    { q: "A級及B級機關ISMS導入時限是多久?", a: "初次受核定或等級變更後2年內導入,3年內完成公正第三方驗證"},
                    { q: "ISO/IEC 27001的主要用途是什麼?", a: "資訊安全管理系統的要求事項標準"},
                    { q: "A級、B級、C級機關的資通安全專責人員配置數量分別是多少?", a: "A級4人、B級2人、C級1人"},
                    { q: "A級、B級、C級機關的內部稽核頻率分別是多少?", a: "A級每年2次、B級每年1次、C級每2年1次"},
                    { q: "業務持續計畫的核心時間指標RPO是什麼?", a: "復原點目標,表示可容忍的資料損失時間"},
                    { q: "業務持續計畫的核心時間指標RTO是什麼?", a: "復原時間目標,表示可容忍的服務中斷時間"},
                    { q: "資安治理成熟度評估分為哪五個等級?", a: "初始級、發展級、已定義級、已管理級、最佳化級"}
                ],
                quizzes: [
                    { q: "以下哪個不是資通系統防護需求分級構面?", opts: ["機密性", "完整性", "效率性", "可用性"], ans: 2, exp: "資通系統防護需求分級的四個構面是機密性、完整性、可用性、法律遵循性,不包括效率性"},
                    { q: "以下哪個不是資通系統防護基準的構面?", opts: ["存取控制", "事件日誌", "預算管理", "營運持續計畫"], ans: 2, exp: "防護基準包含存取控制、事件日誌與可歸責性、營運持續計畫等七大構面,不包括預算管理"},
                    { q: "以下哪個不是ISMS相關標準?", opts: ["ISO 27001", "ISO 27002", "ISO 9001", "CNS 27001"], ans: 2, exp: "ISO 27001、ISO 27002、CNS 27001都是ISMS相關標準,ISO 9001是品質管理標準"},
                    { q: "以下哪個不是資通安全稽核類型?", opts: ["第一方稽核", "第二方稽核", "第三方稽核", "第四方稽核"], ans: 3, exp: "資通安全稽核分為第一方稽核(內部稽核)、第二方稽核(上級稽核)、第三方稽核(驗證),沒有第四方稽核"},
                    { q: "以下哪個不是營運持續計畫的時間指標?", opts: ["RPO", "RTO", "WRT", "ABC"], ans: 3, exp: "營運持續計畫的時間指標包括RPO、RTO、WRT、MTPD,不包括ABC"},
                    { q: "以下哪個不是資料備份方式?", opts: ["完整備份", "差異備份", "增量備份", "虛擬備份"], ans: 3, exp: "資料備份方式包括完整備份、差異備份、增量備份,虛擬備份不是標準備份方式"},
                    { q: "以下哪個不是資安治理成熟度等級?", opts: ["初始級", "發展級", "完美級", "已管理級"], ans: 2, exp: "資安治理成熟度分為初始級、發展級、已定義級、已管理級、最佳化級,沒有完美級"},
                    { q: "以下哪個不是CNS 27002的控制措施類別?", opts: ["組織控制措施", "人員控制措施", "財務控制措施", "技術控制措施"], ans: 2, exp: "CNS 27002的控制措施分為組織、人員、實體、技術四大類,不包括財務控制措施"},
                    { q: "A級機關應於多久內完成資通系統分級?", opts: ["6個月", "1年", "2年", "3年"], ans: 1, exp: "A級機關應於初次受核定或等級變更後1年內完成資通系統分級"},
                    { q: "A級機關應配置幾位資通安全專責人員?", opts: ["1人", "2人", "3人", "4人"], ans: 3, exp: "A級機關應配置4人資通安全專責人員"},
                    { q: "B級機關應配置幾位資通安全專責人員?", opts: ["1人", "2人", "3人", "4人"], ans: 1, exp: "B級機關應配置2人資通安全專責人員"},
                    { q: "C級機關應配置幾位資通安全專責人員?", opts: ["1人", "2人", "3人", "4人"], ans: 0, exp: "C級機關應配置1人資通安全專責人員"},
                    { q: "A級機關內部稽核頻率是多少?", opts: ["每年1次", "每年2次", "每2年1次", "每3年1次"], ans: 1, exp: "A級機關應每年辦理2次內部資通安全稽核"},
                    { q: "B級機關內部稽核頻率是多少?", opts: ["每年1次", "每年2次", "每2年1次", "每3年1次"], ans: 0, exp: "B級機關應每年辦理1次內部資通安全稽核"},
                    { q: "C級機關內部稽核頻率是多少?", opts: ["每年1次", "每年2次", "每2年1次", "每3年1次"], ans: 2, exp: "C級機關應每2年辦理1次內部資通安全稽核"},
                    { q: "第一方稽核是指什麼?", opts: ["外部稽核", "內部資通安全稽核", "客戶稽核", "驗證稽核"], ans: 1, exp: "第一方稽核是組織內部的自我檢查,用以確認自身資安維護計畫的實施狀況"},
                    { q: "第二方稽核是指什麼?", opts: ["內部稽核", "上級機關稽核下級機關或機關稽核委外廠商", "驗證稽核", "自我稽核"], ans: 1, exp: "第二方稽核是外部單位對供應商或下級單位的稽核"},
                    { q: "第三方稽核是指什麼?", opts: ["內部稽核", "上級稽核", "導入及通過公正第三方ISMS驗證", "自我稽核"], ans: 2, exp: "第三方稽核由獨立的第三方認證機構進行,以取得國際認可的資安管理系統驗證"},
                    { q: "RPO代表什麼?", opts: ["復原時間目標", "復原點目標", "工作復原時間", "最大中斷時間"], ans: 1, exp: "RPO是復原點目標,表示可容忍的資料損失時間"},
                    { q: "RTO代表什麼?", opts: ["復原點目標", "復原時間目標", "工作復原時間", "最大中斷時間"], ans: 1, exp: "RTO是復原時間目標,表示可容忍的服務中斷時間"},
                    { q: "WRT代表什麼?", opts: ["復原點目標", "復原時間目標", "工作復原時間", "最大中斷時間"], ans: 2, exp: "WRT是工作復原時間,讓核心業務回到災害發生前的服務水準所需之時間"},
                    { q: "MTPD代表什麼?", opts: ["復原點目標", "復原時間目標", "工作復原時間", "最大可容忍中斷時間"], ans: 3, exp: "MTPD是最大可容忍中斷時間,為核心業務與其所需資源評估最大可容忍中斷之時間"},
                    { q: "ISO/IEC 27001主要規範什麼?", opts: ["風險管理", "資訊安全管理系統要求事項", "控制措施指引", "稽核指引"], ans: 1, exp: "ISO/IEC 27001是資訊安全管理系統的要求事項標準"},
                    { q: "ISO/IEC 27002主要規範什麼?", opts: ["管理系統要求", "資訊安全控制措施指導綱要", "風險管理", "稽核標準"], ans: 1, exp: "ISO/IEC 27002是資訊安全控制措施的指導綱要"},
                    { q: "ISO/IEC 27005主要規範什麼?", opts: ["管理系統要求", "控制措施", "資訊安全風險管理指引", "稽核標準"], ans: 2, exp: "ISO/IEC 27005提供資訊安全風險管理的指引"},
                    { q: "CNS 27001等同於哪個國際標準?", opts: ["ISO 27002", "ISO/IEC 27001", "ISO 27005", "ISO 27000"], ans: 1, exp: "CNS 27001:2023等同於ISO/IEC 27001:2022"},
                    { q: "CNS 27002等同於哪個國際標準?", opts: ["ISO/IEC 27001", "ISO/IEC 27002", "ISO 27005", "ISO 27000"], ans: 1, exp: "CNS 27002:2023等同於ISO/IEC 27002:2022"},
                    { q: "資安治理成熟度最高等級是什麼?", opts: ["初始級", "發展級", "已定義級", "最佳化級"], ans: 3, exp: "資安治理成熟度最高等級是最佳化級"},
                    { q: "完整備份的優點是什麼?", opts: ["最快速", "恢復最完整", "佔用空間最小", "成本最低"], ans: 1, exp: "完整備份的優點是恢復最完整,但耗時長且佔用空間大"},
                    { q: "差異備份備份的是什麼?", opts: ["所有資料", "上次完整備份後有變更或新增的檔案", "上次備份後的變更", "只有新增檔案"], ans: 1, exp: "差異備份備份上次完整備份後,內容有變更或新增的檔案"}
                ]
            },
            5: {
                title: "Unit-5: 資通系統防護控制措施",
                subtitle: "資通系統防護控制措施",
                flashcards: [
                    { q: "存取控制的三種類型是什麼?", a: "實體類控制、技術類控制、管理類控制"},
                    { q: "最小權限原則的定義是什麼?", a: "僅允許使用者依機關任務及業務功能,完成指派任務所需之授權存取"},
                    { q: "遠端存取應採用什麼機制保護?", a: "應採用加密機制,來源應為已預先定義及管理的存取控制點"},
                    { q: "事件日誌應保留至少多久?", a: "至少保留6個月"},
                    { q: "雜湊函式的三個主要特性是什麼?", a: "固定長度、單向性、抗碰撞性"},
                    { q: "系統備份的RPO是什麼意思?", a: "復原點目標,表示系統可容忍資料損失的時間要求"},
                    { q: "系統備援的RTO是什麼意思?", a: "復原時間目標,表示資通系統從中斷後至重新恢復服務之可容忍時間"},
                    { q: "身分驗證的三種方式是什麼?", a: "知識(密碼)、持有(憑證卡)、生物特徵(指紋)"},
                    { q: "SSDLC代表什麼?", a: "系統發展生命週期安全,包括需求、設計、開發、測試、部署維運、委外等階段"},
                    { q: "資料傳輸應採用什麼保護?", a: "應採用加密機制確保傳輸之機密性與完整性"}
                ],
                quizzes: [
                    { q: "以下哪個不是存取控制的授權原則?", opts: ["業務僅知原則", "最小權限原則", "最大權限原則", "職務區隔"], ans: 2, exp: "存取控制的授權原則包括業務僅知原則、最小權限原則、職務區隔、特殊權限管理,不包括最大權限原則"},
                    { q: "以下哪個不是存取控制的類型?", opts: ["實體類控制", "技術類控制", "財務類控制", "管理類控制"], ans: 2, exp: "存取控制分為實體類控制、技術類控制、管理類控制,不包括財務類控制"},
                    { q: "以下哪個不是帳號管理的內容?", opts: ["帳號申請", "帳號建立", "帳號投資", "帳號刪除"], ans: 2, exp: "帳號管理包括申請、建立、修改、啟用、停用及刪除,不包括投資"},
                    { q: "以下哪個不是事件日誌應包含的資訊?", opts: ["事件類型", "發生時間", "使用者薪資", "使用者身分"], ans: 2, exp: "事件日誌應包含事件類型、發生時間、發生位置及使用者身分,不包括使用者薪資"},
                    { q: "以下哪個不是雜湊函式的特性?", opts: ["固定長度", "單向性", "可逆性", "抗碰撞性"], ans: 2, exp: "雜湊函式具有固定長度、單向性、抗碰撞性,不具有可逆性"},
                    { q: "以下哪個不是資料備份方式?", opts: ["完整備份", "差異備份", "增量備份", "虛擬備份"], ans: 3, exp: "資料備份方式包括完整備份、差異備份、增量備份,虛擬備份不是標準備份方式"},
                    { q: "以下哪個不是身分驗證的方式?", opts: ["知識因子", "持有因子", "收入因子", "生物特徵因子"], ans: 2, exp: "身分驗證方式包括知識因子、持有因子、生物特徵因子,不包括收入因子"},
                    { q: "以下哪個不是SSDLC的階段?", opts: ["需求階段", "設計階段", "銷售階段", "測試階段"], ans: 2, exp: "SSDLC包括需求、設計、開發、測試、部署維運、委外等階段,不包括銷售階段"},
                    { q: "最小權限原則適用於哪些等級?", opts: ["只有普級", "只有高級", "高中等級", "所有等級"], ans: 2, exp: "最小權限原則適用於高中等級的資通系統"},
                    { q: "遠端存取的權限檢查應於何處完成?", opts: ["客戶端", "伺服器端", "路由器", "防火牆"], ans: 1, exp: "使用者之權限檢查作業應於伺服器端完成"},
                    { q: "閒置帳號應如何處理?", opts: ["保留", "禁用", "刪除", "升級"], ans: 1, exp: "閒置過久的資通系統帳號應被禁用"},
                    { q: "臨時或緊急帳號逾期後應如何處理?", opts: ["保留", "延長", "刪除或禁用", "升級"], ans: 2, exp: "已逾期之臨時或緊急帳號應刪除或禁用"},
                    { q: "日誌記錄應包含哪些內容?", opts: ["只有時間", "只有位置", "事件類型、時間、位置及使用者身分", "只有使用者"], ans: 2, exp: "日誌應包含事件類型、發生時間、發生位置及使用者身分識別等資訊"},
                    { q: "日誌應保留多久?", opts: ["1個月", "3個月", "6個月", "1年"], ans: 2, exp: "應保留日誌至少六個月"},
                    { q: "日誌時戳應對應到什麼時間?", opts: ["本地時間", "UTC或GMT", "東京時間", "紐約時間"], ans: 1, exp: "應使用系統內部時鐘產生時戳,並可對應到世界協調時間(UTC)或格林威治標準時間(GMT)"},
                    { q: "RPO主要考量什麼?", opts: ["服務中斷時間", "可容忍的資料損失時間", "系統效能", "網路速度"], ans: 1, exp: "RPO是復原點目標,表示可容忍的資料損失時間"},
                    { q: "RTO主要考量什麼?", opts: ["資料損失時間", "可容忍的服務中斷時間", "系統效能", "網路速度"], ans: 1, exp: "RTO是復原時間目標,表示可容忍的服務中斷時間"},
                    { q: "系統備份應在何處儲存?", opts: ["同一地點", "與運作系統不同地點", "同一機房", "同一伺服器"], ans: 1, exp: "高等級系統應在與運作系統不同地點之獨立設施或防火櫃中儲存備份"},
                    { q: "系統備援的目的是什麼?", opts: ["增加效能", "確保業務持續運作", "降低成本", "提升速度"], ans: 1, exp: "系統備援旨在確保在發生系統中斷時,業務能夠在可接受的時間內恢復正常運作"},
                    { q: "多因素驗證包含幾種因子?", opts: ["一種", "兩種或以上", "三種", "四種"], ans: 1, exp: "多因素驗證應結合兩種或以上不同類型的驗證因子"},
                    { q: "知識因子驗證是指什麼?", opts: ["指紋", "密碼", "智慧卡", "憑證"], ans: 1, exp: "知識因子是指使用者知道的資訊,如密碼、PIN碼"},
                    { q: "持有因子驗證是指什麼?", opts: ["密碼", "指紋", "智慧卡", "虹膜"], ans: 2, exp: "持有因子是指使用者擁有的物品,如智慧卡、憑證卡、OTP裝置"},
                    { q: "生物特徵因子驗證是指什麼?", opts: ["密碼", "智慧卡", "指紋", "憑證"], ans: 2, exp: "生物特徵因子是指使用者的生理特徵,如指紋、虹膜、臉部辨識"},
                    { q: "SSDLC需求階段主要做什麼?", opts: ["撰寫程式", "定義系統安全需求", "測試系統", "部署系統"], ans: 1, exp: "需求階段主要定義系統的功能及安全需求"},
                    { q: "SSDLC測試階段主要做什麼?", opts: ["設計系統", "撰寫程式", "進行安全測試", "部署系統"], ans: 2, exp: "測試階段主要進行功能測試及安全性測試"},
                    { q: "資料傳輸保護主要使用什麼技術?", opts: ["壓縮", "加密", "備份", "監控"], ans: 1, exp: "資料傳輸應採用加密機制確保機密性與完整性"},
                    { q: "資料儲存保護主要使用什麼技術?", opts: ["壓縮", "加密", "分散", "隱藏"], ans: 1, exp: "資料儲存應採用加密或其他適當方式確保安全"},
                    { q: "漏洞修復應如何進行?", opts: ["忽略", "延後處理", "及時修補", "等待廠商"], ans: 2, exp: "應及時進行漏洞修復,定期更新系統及應用程式"},
                    { q: "系統監控的目的是什麼?", opts: ["增加成本", "及時發現異常行為", "降低效能", "限制使用"], ans: 1, exp: "系統監控旨在持續監測系統運作狀態,及時發現異常情況"},
                    { q: "雜湊函式主要用於什麼?", opts: ["加密資料", "驗證資料完整性", "壓縮資料", "備份資料"], ans: 1, exp: "雜湊函式主要用於驗證資料完整性,透過比對雜湊值判斷資料是否被竄改"}
                ]
            },
            6: {
                title: "Unit-6: 資通安全技術應辦事項",
                subtitle: "資通安全技術應辦事項",
                flashcards: [
                    { q: "防毒軟體的三種部署方式是什麼?", a: "個人電腦與伺服器防毒、電子郵件防毒閘道、上網防毒閘道"},
                    { q: "防毒軟體管理的最重要重點是什麼?", a: "定期自動更新病毒碼"},
                    { q: "網路防火牆的三個主要用途是什麼?", a: "區隔不同安全等級網段、過濾資料封包、提供稽核與控制存取"},
                    { q: "DMZ是什麼?", a: "非軍事區(Demilitarized Zone),用於放置對外服務的伺服器"},
                    { q: "WAF的全名是什麼?主要保護什麼?", a: "Web Application Firewall(網站應用程式防火牆),主要保護網站應用程式免受應用層攻擊"},
                    { q: "IDS和IPS的主要差別是什麼?", a: "IDS只偵測並記錄(被動),IPS可主動阻擋攻擊(主動)"},
                    { q: "SOC的全名和主要功能是什麼?", a: "Security Operations Center(資通安全威脅偵測管理機制),負責監控、偵測、分析及回應資安威脅"},
                    { q: "GCB是什麼?", a: "Government Configuration Baseline(政府組態基準),提供政府機關資通系統的安全組態設定標準"},
                    { q: "EDR的全名和主要功能是什麼?", a: "Endpoint Detection and Response(端點偵測及回應系統),監控端點設備的異常行為並即時回應"},
                    { q: "VANS的全名和主要功能是什麼?", a: "Vulnerability Analysis Notification Service(政府機關資安弱點通報機制),提供弱點掃描及通報服務"}
                ],
                quizzes: [
                    { q: "以下哪個不是防毒軟體的部署方式?", opts: ["個人電腦防毒", "電子郵件防毒閘道", "財務系統防毒", "上網防毒閘道"], ans: 2, exp: "防毒軟體部署包括個人電腦與伺服器防毒、電子郵件防毒閘道、上網防毒閘道,不包括財務系統防毒"},
                    { q: "以下哪個不是惡意程式的來源?", opts: ["電子郵件", "USB硬碟", "紙本文件", "網站瀏覽"], ans: 2, exp: "惡意程式來源包括電子郵件、USB硬碟、網站瀏覽、即時通訊、檔案傳輸,不包括紙本文件"},
                    { q: "以下哪個不是網路防火牆的用途?", opts: ["區隔網段", "過濾封包", "增加速度", "提供稽核"], ans: 2, exp: "網路防火牆用途包括區隔不同安全等級網段、過濾資料封包、提供稽核與控制,不包括增加速度"},
                    { q: "以下哪個不是WAF的偵測技術?", opts: ["白名單", "黑名單", "攻擊特徵判斷", "價格判斷"], ans: 3, exp: "WAF偵測技術包括白名單、黑名單、攻擊特徵判斷,不包括價格判斷"},
                    { q: "以下哪個不是IDS/IPS的技術類型?", opts: ["特徵碼比對", "異常行為分析", "成本分析", "狀態協定分析"], ans: 2, exp: "IDS/IPS技術類型包括特徵碼比對、異常行為分析、狀態協定分析,不包括成本分析"},
                    { q: "以下哪個不是電子郵件過濾的判斷技術?", opts: ["連線模式", "關鍵字比對", "價格比對", "貝氏演算法"], ans: 2, exp: "電子郵件過濾判斷技術包括連線模式、關鍵字比對、內容過濾、外部資料庫比對、貝氏演算法、圖片辨識,不包括價格比對"},
                    { q: "以下哪個不是SOC的服務項目?", opts: ["資安監控", "事件分析", "財務規劃", "威脅情資"], ans: 2, exp: "SOC服務包括資安監控、事件分析、威脅情資、應變支援,不包括財務規劃"},
                    { q: "以下哪個不是GCB的類別?", opts: ["作業系統", "網路設備", "辦公軟體", "財務軟體"], ans: 3, exp: "GCB類別包括作業系統、網路設備、資料庫、辦公軟體等,不包括財務軟體"},
                    { q: "防毒軟體最重要的管理重點是什麼?", opts: ["增加容量", "定期自動更新病毒碼", "降低成本", "增加速度"], ans: 1, exp: "防毒軟體管理最重要的是定期自動更新病毒碼,確保能夠有效偵測新興威脅"},
                    { q: "電子郵件是惡意程式最常見的什麼?", opts: ["儲存位置", "傳播途徑", "來源代碼", "執行環境"], ans: 1, exp: "電子郵件是惡意程式最常見的傳播途徑"},
                    { q: "防毒軟體個人電腦與伺服器系統可採用什麼策略?", opts: ["相同廠牌", "不同廠牌", "不安裝", "只安裝一種"], ans: 1, exp: "個人電腦與伺服器防毒系統與防毒閘道系統可採用不同廠牌,以增加防護的多樣性"},
                    { q: "網路防火牆應建置幾台以確保高可靠度?", opts: ["1台", "2台", "3台", "4台"], ans: 1, exp: "建議建置2台防火牆並設定成高可靠度(HA)運作模式"},
                    { q: "DMZ主要用於放置什麼?", opts: ["內部檔案", "對外服務的伺服器", "個人電腦", "備份資料"], ans: 1, exp: "DMZ是隔離區,專門放置需要對外部網路提供服務的伺服器"},
                    { q: "防火牆存取規則的變更應如何管理?", opts: ["隨意變更", "建立變更申請、核准及記錄流程", "不需管理", "只記錄"], ans: 1, exp: "應建立標準的變更申請、核准及記錄流程,確保所有變更皆經授權且有跡可循"},
                    { q: "WAF主要防禦什麼類型的攻擊?", opts: ["硬體故障", "應用層攻擊如SQL Injection和XSS", "網路中斷", "電力故障"], ans: 1, exp: "WAF主要防禦針對網站應用程式的攻擊,如SQL Injection和Cross-Site Scripting"},
                    { q: "硬體式WAF的主要優點是什麼?", opts: ["價格便宜", "高性能與高吞吐量", "不需設定", "體積小"], ans: 1, exp: "硬體式WAF的優點是高性能與高吞吐量,能處理大量網路流量"},
                    { q: "軟體式WAF的部署位置在哪?", opts: ["網路邊界", "安裝在Web伺服器上", "路由器上", "防火牆上"], ans: 1, exp: "軟體式WAF安裝在Web伺服器上,作為應用程式或模組運行"},
                    { q: "電子郵件過濾機制的匣道模式特點是什麼?", opts: ["影響所有流量", "安全性高(Fail Close)", "成本低", "不需設定"], ans: 1, exp: "匣道模式的特點是安全性高(Fail Close),設備故障時信件無法進出,確保安全"},
                    { q: "貝氏演算法的優點是什麼?", opts: ["最便宜", "具備學習能力,可透過使用者標記訓練", "最快速", "不需維護"], ans: 1, exp: "貝氏演算法具備學習能力,可透過使用者標記訓練過濾器,使其判斷越來越精準"},
                    { q: "IDS的反應方式是什麼?", opts: ["主動阻擋", "只記錄並發出警報", "刪除檔案", "關閉系統"], ans: 1, exp: "IDS採用被動方式,只將異常事件記錄下來並發出警報"},
                    { q: "IPS的反應方式是什麼?", opts: ["只記錄", "立即採取行動阻斷攻擊", "發送郵件", "等待人工處理"], ans: 1, exp: "IPS採用主動方式,偵測到攻擊事件後會立即採取行動阻斷"},
                    { q: "特徵碼比對的限制是什麼?", opts: ["太慢", "只能偵測已知攻擊", "太貴", "不準確"], ans: 1, exp: "特徵碼比對只能偵測已知攻擊,對於零日攻擊無法有效偵測"},
                    { q: "異常行為分析的優點是什麼?", opts: ["最便宜", "能夠偵測未知類型攻擊", "最快速", "最簡單"], ans: 1, exp: "異常行為分析能夠偵測未知類型攻擊,對於新型或變種的威脅具有較好的防禦能力"},
                    { q: "SOC的核心目標是什麼?", opts: ["增加收入", "即時偵測、分析及回應資安威脅", "降低成本", "提升效能"], ans: 1, exp: "SOC的核心目標是即時監控、偵測、分析及回應資安威脅"},
                    { q: "GCB的主要目的是什麼?", opts: ["增加效能", "提供安全組態設定標準", "降低成本", "簡化操作"], ans: 1, exp: "GCB提供政府機關資通系統的安全組態設定標準,降低組態設定錯誤的風險"},
                    { q: "EDR的主要功能是什麼?", opts: ["備份資料", "監控端點設備異常行為並即時回應", "加速系統", "清理垃圾"], ans: 1, exp: "EDR監控端點設備的異常行為,及時偵測並回應威脅"},
                    { q: "VANS提供什麼服務?", opts: ["防毒軟體", "弱點掃描及通報服務", "系統備份", "網路加速"], ans: 1, exp: "VANS提供政府機關資安弱點掃描及通報服務"},
                    { q: "IDS/IPS對SSL/TLS加密連線的限制是什麼?", opts: ["無限制", "未解密情況下無法識別內容", "可完全檢查", "不影響"], ans: 1, exp: "IDS/IPS在未進行解密的情況下,無法識別SSL加密連線中的內容"},
                    { q: "防火牆存取紀錄應如何處理?", opts: ["不需保留", "即時匯出到安全的集中式日誌伺服器", "只保留一週", "只記錄部分"], ans: 1, exp: "應設定防火牆將存取日誌即時匯出到安全的集中式日誌伺服器,並保留足夠長度的時間"},
                    { q: "WAF選購時應考量什麼?", opts: ["只考量價格", "處理效能、中文支援、HTTPS解密能力", "只考量品牌", "只考量外觀"], ans: 1, exp: "WAF選購應考量處理效能、中文URL及內容判斷能力、HTTPS加密連線的解密與過濾能力"}
                ]
            }
        };

        // 初始化函數
        function initializeUI() {
            try {
                generateUnitNav();
                generatePages();
                showPage(1);
            } catch (err) {
                console.error('Failed to initialize UI:', err);
            }
        }

        // 生成導航按鈕
        function generateUnitNav() {
            const nav = document.getElementById('unitNav');
            if (!nav) throw new Error('unitNav element not found');

            for (let i = 1; i <= 6; i++) {
                const btn = document.createElement('button');
                btn.textContent = `Unit-${i}`;
                btn.className = i === 1 ? 'active' : '';
                btn.onclick = () => showPage(i);
                nav.appendChild(btn);
            }
        }

        // 生成分頁
        function generatePages() {
            const container = document.getElementById('pagesContainer');
            if (!container) throw new Error('pagesContainer element not found');

            for (let i = 1; i <= 6; i++) {
                container.appendChild(createPageElement(i));
            }
        }

        // 創建頁面元素
        function createPageElement(unitNum) {
            const page = document.createElement('div');
            page.id = `page-${unitNum}`;
            page.className = `page ${unitNum === 1 ? 'active' : ''}`;

            const mindmapImg = mindmapImages[unitNum] || '';

            page.innerHTML = `
                <div class="tab-navigation">
                    <button class="tab-btn active" onclick="showTab(this, 'mindmap-${unitNum}')">🧠 心智圖</button>
                    <button class="tab-btn" onclick="showTab(this, 'flashcard-${unitNum}')">🃏 閃卡</button>
                    <button class="tab-btn" onclick="showTab(this, 'quiz-${unitNum}')">✏️ 測驗</button>
                </div>

                <div id="mindmap-${unitNum}" class="tab-content active mindmap-container">
                    <img src="${mindmapImg}" alt="Unit-${unitNum} 心智圖" class="mindmap-image" loading="lazy">
                </div>

                <div id="flashcard-${unitNum}" class="tab-content">
                    <div class="flashcard-container">
                        <div class="flashcard" onclick="this.classList.toggle('flipped')">
                            <div class="flashcard-inner">
                                <div class="flashcard-front"><span></span></div>
                                <div class="flashcard-back"><span></span></div>
                            </div>
                        </div>
                        <div class="flashcard-nav">
                            <button onclick="previousFlashcard(${unitNum})">← 上一張</button>
                            <button onclick="nextFlashcard(${unitNum})">下一張 →</button>
                        </div>
                    </div>
                </div>

                <div id="quiz-${unitNum}" class="tab-content">
                    <div class="quiz-container">
                        <div class="quiz-progress">第 <span id="quiz${unitNum}-current">1</span> / <span id="quiz${unitNum}-total">3</span> 題</div>
                        <div id="quiz${unitNum}-content"></div>
                        <div id="quiz${unitNum}-score" class="quiz-score"></div>
                    </div>
                </div>
            `;
            return page;
        }

        // 顯示頁面
        function showPage(pageNum) {
            if (pageNum < 1 || pageNum > 6) return;
            if (!appData[pageNum]) return;

            const pageEl = document.getElementById(`page-${pageNum}`);
            if (!pageEl) return;

            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            pageEl.classList.add('active');

            document.querySelectorAll('.unit-nav button').forEach((btn, idx) => {
                btn.classList.toggle('active', idx === pageNum - 1);
            });

            document.getElementById('pageSubtitle').textContent = appData[pageNum].subtitle;

            setTimeout(() => {
                try {
                    initFlashcards(pageNum);
                    initQuiz(pageNum);
                } catch (err) {
                    console.error(`Failed to initialize page ${pageNum}:`, err);
                }
            }, 100);
        }

        // Tab 切換
        function showTab(btn, tabId) {
            const page = btn.closest('.page');
            if (!page) return;

            page.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            page.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));

            btn.classList.add('active');
            const tabEl = document.getElementById(tabId);
            if (tabEl) tabEl.classList.add('active');
        }

        // 閃卡管理
        const flashcardState = {};

        function initFlashcards(unitNum) {
            const data = appData[unitNum];
            if (!data || !data.flashcards || data.flashcards.length === 0) return;
            flashcardState[unitNum] = { current: 0 };
            updateFlashcard(unitNum);
        }

        function updateFlashcard(unitNum) {
            const data = appData[unitNum];
            const state = flashcardState[unitNum];

            if (!state || !data || !data.flashcards) return;
            if (state.current < 0 || state.current >= data.flashcards.length) return;

            const card = data.flashcards[state.current];
            const front = document.querySelector(`#flashcard-${unitNum} .flashcard-front span`);
            const back = document.querySelector(`#flashcard-${unitNum} .flashcard-back span`);
            const flashcard = document.querySelector(`#flashcard-${unitNum} .flashcard`);

            if (front && card.q) front.textContent = card.q;
            if (back && card.a) back.textContent = card.a;
            if (flashcard) flashcard.classList.remove('flipped');

            updateFlashcardButtons(unitNum);
        }

        function updateFlashcardButtons(unitNum) {
            const state = flashcardState[unitNum];
            const data = appData[unitNum];

            if (!state || !data || !data.flashcards) return;

            const buttons = document.querySelectorAll(`#flashcard-${unitNum} .flashcard-nav button`);
            if (buttons.length < 2) return;

            buttons[0].disabled = state.current === 0;
            buttons[1].disabled = state.current === data.flashcards.length - 1;
        }

        function nextFlashcard(unitNum) {
            const state = flashcardState[unitNum];
            const data = appData[unitNum];
            if (state && state.current < data.flashcards.length - 1) {
                state.current++;
                updateFlashcard(unitNum);
            }
        }

        function previousFlashcard(unitNum) {
            const state = flashcardState[unitNum];
            if (state && state.current > 0) {
                state.current--;
                updateFlashcard(unitNum);
            }
        }

        // 測驗管理
        const quizState = {};

        function initQuiz(unitNum) {
            const data = appData[unitNum];
            if (!data || !data.quizzes || data.quizzes.length === 0) return;

            quizState[unitNum] = { current: 0, answered: false, score: 0 };

            const totalEl = document.getElementById(`quiz${unitNum}-total`);
            if (totalEl) totalEl.textContent = data.quizzes.length;

            showQuizQuestion(unitNum);
        }

        function showQuizQuestion(unitNum) {
            const data = appData[unitNum];
            const state = quizState[unitNum];

            if (!state || !data || !data.quizzes) return;
            if (state.current < 0 || state.current >= data.quizzes.length) return;

            const quiz = data.quizzes[state.current];
            const contentEl = document.getElementById(`quiz${unitNum}-content`);
            const currentEl = document.getElementById(`quiz${unitNum}-current`);

            if (!contentEl || !currentEl) return;

            currentEl.textContent = state.current + 1;

            let html = `
                <div class="quiz-question">
                    <h3>${quiz.q}</h3>
                    <div class="quiz-options">
            `;

            quiz.opts.forEach((opt, idx) => {
                html += `<button class="quiz-option" onclick="selectOption(${unitNum}, ${idx})">${opt}</button>`;
            });

            html += `
                    </div>
                </div>
            `;

            contentEl.innerHTML = html;
            state.answered = false;
        }

        function selectOption(unitNum, optionIdx) {
            const data = appData[unitNum];
            const state = quizState[unitNum];

            if (!state || state.answered || !data || !data.quizzes) return;

            const quiz = data.quizzes[state.current];
            const options = document.querySelectorAll(`#quiz${unitNum}-content .quiz-option`);
            const contentEl = document.getElementById(`quiz${unitNum}-content`);

            if (!contentEl) return;

            state.answered = true;

            const isCorrect = optionIdx === quiz.ans;
            options[optionIdx].classList.add(isCorrect ? 'correct' : 'incorrect');

            if (!isCorrect) {
                options[quiz.ans].classList.add('correct');
            } else {
                state.score++;
            }

            options.forEach(opt => opt.disabled = true);

            let explanation = `<div class="quiz-explanation show">${quiz.exp}</div>`;
            contentEl.innerHTML += explanation;

            setTimeout(() => {
                state.current++;
                if (state.current < data.quizzes.length) {
                    showQuizQuestion(unitNum);
                } else {
                    showQuizScore(unitNum);
                }
            }, 2000);
        }

        function showQuizScore(unitNum) {
            const data = appData[unitNum];
            const state = quizState[unitNum];

            if (!state || !data) return;

            const scoreEl = document.getElementById(`quiz${unitNum}-score`);
            const contentEl = document.getElementById(`quiz${unitNum}-content`);

            if (!scoreEl || !contentEl) return;

            const percentage = Math.round((state.score / data.quizzes.length) * 100);
            const feedback = percentage === 100 ? '完美！🌟' : percentage >= 80 ? '很好！👏' : percentage >= 60 ? '不錯！🎉' : '再加油！💪';

            scoreEl.innerHTML = `
                <h2>${feedback}</h2>
                <p>您得分了 ${state.score}/${data.quizzes.length} (${percentage}%)</p>
            `;
            scoreEl.classList.add('show');
            contentEl.style.display = 'none';
        }

        // 頁面載入完成後初始化
        document.addEventListener('DOMContentLoaded', initializeUI);
    </script>
</body>
</html>
